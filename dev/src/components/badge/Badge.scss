.badge {
  @include moveUp;
  @include fade;
  @include UI-base-rounded;
  @include UI-spinner(($base * 4), 3, $c-primary);
  $badge: &;

  background: $c-secondary;
  display: flex;
  flex-direction: column;
  height: 100%;
  padding: #{$base * 5px}; 
  position: relative;
  width: 100%;
  transition: background .6s $a-ease-out;

  &--hasImage {
    padding: #{$base * 5px} #{$base * 5px} #{$base * 10px} #{$base * 5px}; 
  }

  &--isLight {
    background: $c-white;
  }

  &--hasArrow-left {
    @include UI-arrow('left', $c-secondary);

    &#{$badge}--isLight & {
      @include UI-arrow('bottom', $c-white);
    }
  }

  &--hasArrow-bottom {
    @include UI-arrow('bottom', $c-secondary);

    &#{$badge}--isLight {
      @include UI-arrow('bottom', $c-white);
    }
  }

  &::after {
    content: '';
    display: none;
    position: absolute;
    pointer-events: none;
    z-index: 3;
  }

  &:after {
    display: none;
    top: 50%;
    left: 50%;
    margin-top: #{($base * 2) * -1px};
    margin-left: #{($base * 2) * -1px};
  }

  &--isLoading {
    background: rgba($c-secondary, .4);
    &::after {
      display: block;
    }
  }

  @include breakpoint('large-desktop') {
    padding: #{$base * 4px} #{$base * 6px};
  }

  &__title,
  &__subtitle,
  &__date,
  &__message {
    color: $c-white;
    padding-left: #{($base * 4px)};
    position: relative;
    word-break: break-word;

    #{$badge}--hasIcon & {
      padding-left: 0;
    }

    #{$badge}--isLight & {
      color: $c-dark-gray;
    }
  }

  &__icon {
    background: $c-secondary;
    border-radius: 100% 0px 100% 100%;
    flex: 0 0 #{$base * 5px};
    height: #{$base * 5px};
    position: relative;

    > * {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
    }

    + span {
      margin-left: #{$base * 2px};
    }
  }

  &__enter-key {
    display: flex;
    flex-direction: column;
    min-height: 100%;;
  }

  &__title {
    @include text--bold;
    @include text--medium;
    display: flex;
    align-items: center;

    #{$badge}--hasIcon & {
      @include text--small;
    }

    &::before {
      border-radius: 100%;
      background: $c-white;
      content: '';
      left: 0;
      height: #{$base * 2px};
      margin-right: #{$base * 2px};
      position: absolute;
      top: 0;
      transform: translateY(#{$base * 1px});
      width: #{$base * 2px};

      #{$badge}--isLight & {
        background: $c-primary;
      }

      #{$badge}--hasIcon & {
        display: none;
      }
    }

    ~ #{$badge}__subtitle,
    ~ #{$badge}__date {
      margin-top: #{$base * 1px};
    }

    ~ #{$badge}__message {
      margin-top: #{$base * 4px};

      @include breakpoint('only-phone') {
        margin-top: #{$base * 2px};
      }
    }
  }

  &__subtitle {
    @include text--regular;
    @include text--small;

    transition-delay: .8s;
  }

  &__date {
    @include text--light;
    @include text--xsmall;

    transition-delay: 1s;
  }

  &__message {
    @include text--light;
    @include text--small;
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical; 
    transition-delay: .8s;

    #{$badge}--isLight & {
      color: $c-gray;
    }
  }

  &__image {
    background: $c-primary;
    border-radius: 100%;
    height: #{$base * 10px};
    left: 50%;
    position: absolute;
    top: 100%;
    width: #{$base * 10px};
    transform: translateY(-50%) translateX(-50%);

    @include breakpoint('tablet-pt') {
      @include UI-arrow('top', $c-primary);
      box-shadow: 0px 0px 20px 0px rgba(12, 12, 12, .2);
      transform: translateY(-50%) translateX(-50%) translateY(5px);
    }

    > * {
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translateX(-50%) translateY(-50%);
    }
  }

  &__action {
    margin-bottom: 0;
    margin-top: auto;
    padding-top: #{$base * 2px};
  }
}