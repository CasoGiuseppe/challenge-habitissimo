//- CUSTOM FUNTIONS:
//- convert px to rem
$browser-context: 16;
@function px2rem($pixels, $context: $browser-context) {
  @return ($pixels / $context) * 1rem;
}

//- CUSTOM MIXINS:
//- UI elements
@mixin UI-isValid {
  background: $c-valid;

  &::before,
  &::after {
    background: $c-white;
    content: '';
    height: 40%;
    left: 50%;
    position: absolute;
    top: 50%;
    width: 1px;
    transform-origin: center bottom;
  }

  &::before {
    transform: translateX(-50%) translateX(1px) translateY(-50%) rotate(-45deg);
  }

  &::after {
    transform: translateX(-50%) translateY(-50%) rotate(45deg);
  }
}

@mixin UI-isInvalid {
  background: $c-warning;

  &::before,
  &::after {
    background: $c-white;
    content: '';
    height: 50%;
    left: 50%;
    position: absolute;
    top: 50%;
    width: 1px;
    transform-origin: center center;
  }

  &::before {
    transform: translateX(-50%) translateY(-50%) rotate(-45deg);
  }

  &::after {
    transform: translateX(-50%) translateY(-50%) rotate(45deg);
  }
}

//- typography mixins


//- animations
@mixin moveUp {
  .change-move-leave,
  .change-move-enter-to {
    opacity: 1;
    transform: translateY(0)
  }

  .change-move-leave-active,
  .change-move-enter-active {
    transition: transform .4s $a-ease-out,
                opacity .4s $a-ease-out;
  }

  .change-move-leave-active {
    transition-duration: .2s;
    transition-timing-function: $a-ease-in
  }

  .change-move-leave-to {
    opacity: 0;
    transform: translateY(-25%);
  }

  .change-move-enter {
    opacity: 0;
    transform: translateY(100%)
  }
} 

//- create media queries for columns use
@mixin build-mq($breakpoint, $min-or-max) {
  @if($breakpoint == 0) {
    @content;
  } @else {
    @media screen and (#{$min-or-max}-width: $breakpoint *1px) {
      @content;
    }
  }
}

//- grid create column class
@mixin build-col-classes($modifier, $grid-cols, $breakpoint) {
  @include build-mq($breakpoint, 'min') {
    &__col#{$modifier}-offset-0 {
      margin-left: 0;
    }
    @for $i from 1 through $grid-cols {
      &__col#{$modifier}-#{$i} {
        @if $i != 12 {
          flex: 0 0 calc((100 / #{$grid-cols / $i} * 1%) - #{($grid__margin / 2) + 'px'});
          @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {  
            flex-basis: calc((100% / #{$grid-cols / $i}) - #{($grid__margin / 2) + 'px'});
         }
        } @else {
          flex: 0 0 calc((100 / #{$grid-cols / $i} * 1%));
          @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {  
            flex-basis: calc((100% / #{$grid-cols / $i}));
         }
        }
      }

      &__col#{$modifier}-offset-right-#{$i} {
        margin-right: (100 / ($grid-cols / $i) ) * 1%;
      }

      &__col#{$modifier}-offset-left-#{$i} {
        margin-left: (100 / ($grid-cols / $i) ) * 1%;
      }
    }
  }
}

@each $modifier , $breakpoint in $map-grid-props {
  @if($modifier == '') {
    $modifier: '-xs';
  }
  @include build-mq($breakpoint - 1, 'max') {
    .hidden#{$modifier}-down {
      display: none !important;
    }
  }
  @include build-mq($breakpoint, 'min') {
    .hidden#{$modifier}-up {
      display: none !important;
    }
  }
}

//- generate breakpoints
//- @param breakpoint {string} :
//- only-phone = from 0 to 576 {mobile}
//- tablet-pt = from 768 {tablet portrait}
//- tablet-ld = from 992 {tablet landscape}
//- desktop = from 1140 {desktop}
@mixin breakpoint($breakpoint) {
  @if map-has-key($breakpoints, $breakpoint) {
    @media #{inspect(map-get($breakpoints, $breakpoint))} {
      @content;
    }
  }
 
  @else {
    @warn "Unfortunately, no value could be retrieved from `#{$breakpoint}`. "
        + "Available breakpoints are: #{map-keys($breakpoints)}.";
  }
}

//- generate margin/padding with base: $base
//- @param $styleKey {string}
//- @param $direction {string}
//- @param $size {number}
//- @param $unit {string}
//- How use:
//- @include space('p', 'b', 5) =>
//--- p = 'padding';
//--- b = 'bottom';
//--- 5 = 'amount'; 
@mixin space($styleKey, $direction, $size) {
  $unit: 'px';
  
  $map-style-type: (
    "p": 'padding',
    "m": 'margin'
  );

  $map-style-direction: (
    "l": '-left',
    "r": '-right',
    "b": '-bottom',
    "t": '-top'
  );

  $className: map-get($map-style-type, $styleKey);
  $styleType: map-get($map-style-direction, $direction);

  @if $styleType != null {
    @if $size == 'auto' {
      #{$className + $styleType}: #{$size};
    } @else {
      #{$className + $styleType}: #{($size * $base) + $unit};
    }

  } @else {
    #{$className}: #{($size * $base) + $unit};
  }
}